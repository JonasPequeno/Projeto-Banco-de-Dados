CREATE TABLE CADASTRO(

	CPF char(11),
	DataNascimento DATE NOT NULL,
	Email varchar(100) NOT NULL UNIQUE,
	Senha varchar(50) NOT NULL ,
	Nome varchar(100) NOT NULL ,
	Pais varchar(50) NOT NULL ,
	Estado varchar(50) NOT NULL ,
	Cidade varchar(50) NOT NULL ,
	Bairro varchar(50) NOT NULL ,
	Rua varchar(50) NOT NULL ,
	Numero int ,
	Complemento varchar(100),

	PRIMARY KEY(CPF)
	
);


create table RESERVA(

	Codigo int ,
	Data DATE NOT NULL,
	Status BOOLEAN NOT NULL,
	Tipo VARCHAR(50) NOT NULL ,
	NumQuarto INT ,

	PRIMARY KEY(Codigo) ,
	FOREIGN KEY(NumQuarto) REFERENCES QUARTO(numero));

create table HOSPEDE(

	ID SERIAL ,
	CpfCadastrado VARCHAR(11),
	MotivoViagem VARCHAR(100),
	LocalOrigem VARCHAR(100),
	LocalDestino VARCHAR(100),
	NumQuarto INT,

	PRIMARY KEY(ID) ,
	FOREIGN KEY(CpfCadastrado) REFERENCES CADASTRO(CPF) ,
	FOREIGN KEY(NumQuarto) REFERENCES QUARTO(Numero)
	

);
CREATE TABLE CHECAGEM(

	Codigo INT,
	DataMarcada DATE NOT NULL,
	HoraMarcada TIME NOT NULL,
	Data DATE NOT NULL,
	Hora TIME NOT NULL,
	Status BOOLEAN NOT NULL,
	Observacao VARCHAR(100) ,
	IdHospede INT ,
	Tipo VARCHAR(10) NOT NULL,

	PRIMARY KEY(Codigo),
	FOREIGN KEY(IdHospede) REFERENCES HOSPEDE(ID)
	
);

CREATE TABLE CONTA(

	NotaFiscal VARCHAR(30) ,
	ValorTotal  REAL NOT NULL ,
	Data DATE NOT NULL ,
	Status BOOLEAN NOT NULL,
	CodReserva INT ,

	PRIMARY KEY(NotaFiscal) ,
	FOREIGN KEY(CodReserva) REFERENCES RESERVA(Codigo)
);

CREATE TABLE SERVICO_ACADEMIA(

	IdServExtra INT ,
	Valor REAL NOT NULL ,
	DuracaoTreino INT  NOT NULL,
	TipoTreino VARCHAR(50) NOT NULL ,
	CodReserva INT ,
	DataSolicitada DATE NOT NULL ,
	HoraSolicitada TIME NOT NULL ,

	PRIMARY KEY(IdServExtra) ,
	FOREIGN KEY(CodReserva) REFERENCES RESERVA(codigo) 
);

CREATE TABLE SERVICO_LAVANDEIRA(

	IdServExtra INT ,
	Valor REAL NOT NULL ,
	CodReserva INT ,
	DataSolicitada DATE NOT NULL ,
	HoraSolicitada TIME NOT NULL ,

	PRIMARY KEY(IdServExtra) ,
	FOREIGN KEY(CodReserva) REFERENCES RESERVA(codigo) 
);

CREATE TABLE SERVICO_BAR_RESTAURANTE(

	IdServExtra INT ,
	Valor REAL NOT NULL ,
	CodReserva INT ,
	DataSolicitada DATE NOT NULL ,
	HoraSolicitada TIME NOT NULL ,

	PRIMARY KEY(IdServExtra) ,
	FOREIGN KEY(CodReserva) REFERENCES RESERVA(codigo) 
);

CREATE TABLE SERVICO_FRIGOBAR(

	IdServExtra INT ,
	Valor REAL NOT NULL ,
	CodReserva INT ,
	DataSolicitada DATE NOT NULL ,
	HoraSolicitada TIME NOT NULL ,

	PRIMARY KEY(IdServExtra) ,
	FOREIGN KEY(CodReserva) REFERENCES RESERVA(codigo) 
);

CREATE TABLE PRODUTO(

	Codigo INT 
	Nome VARCHAR(50) NOT NULL ,
	Preco REAL NOT NULL,

	PRIMARY KEY(Codigo) ,
	
);

CREATE TABLE PECA(

	Tipo VARCHAR(30) ,
	Preco REAL NOT NULL ,

	PRIMARY KEY(TIPO)
); 

CREATE TABLE TEM_RESERVA(

	IdHospede SERIAL , 
	CodReserva INT ,

	PRIMARY KEY(IdHospede, CodReserva) ,
	FOREIGN KEY(CodReserva) REFERENCES RESERVA(Codigo),
	FOREIGN KEY(IdHospede) REFERENCES HOSPEDE(Id)
);

CREATE TABLE ACOMPANHANTES(

	IdAcompanhante SERIAL ,
	idHospedePrincipal SERIAL ,

	PRIMARY KEY(IdAcompanhante , idHospedePrincipal) ,
	FOREIGN KEY(IdAcompanhante) REFERENCES HOSPEDE(ID) ,
	FOREIGN KEY(idHospedePrincipal) REFERENCES HOSPEDE(ID)
);

CREATE TABLE LAVANDERIA_LAVA_PECA(

	IdServExtraLavanderia INT ,
	TipoPeca VARCHAR(30) ,
	Quantidade INT NOT NULL ,
	ValorLavagem REAL NOT NULL ,

	PRIMARY KEY(IdServExtraLavanderia , TipoPeca) ,
	FOREIGN KEY(IdServExtraLavanderia) REFERENCES servico_lavandeira(IdServExtra),
	FOREIGN KEY(TipoPeca) REFERENCES PECA(TIPO)
		
);

CREATE TABLE LAVANDERIA_LAVA_PECA(

	IdServExtraLavanderia INT ,
	TipoPeca VARCHAR(30) ,
	Quantidade INT NOT NULL ,
	ValorLavagem REAL NOT NULL ,

	PRIMARY KEY(IdServExtraLavanderia , TipoPeca) ,
	FOREIGN KEY(IdServExtraLavanderia) REFERENCES servico_lavandeira(IdServExtra),
	FOREIGN KEY(TipoPeca) REFERENCES PECA(TIPO)		
);

CREATE TABLE BAR_TEM_PRODUTO(

	IdServExtraBar INT ,
	CodProduto INT ,
	Quantidade INT NOT NULL ,
	ValorVenda REAL NOT NULL ,

	PRIMARY KEY(IdServExtraBar , CodProduto) ,
	FOREIGN KEY(IdServExtraBar) REFERENCES SERVICO_BAR_RESTAURANTE(idServExtra),
	FOREIGN KEY(CodProduto) REFERENCES PRODUTO(Codigo)

);

CREATE TABLE FRIGOBAR_TEM_PRODUTO(

	IdServExtraBar INT ,
	CodProduto INT ,
	Quantidade INT NOT NULL ,
	ValorVenda REAL NOT NULL ,

	PRIMARY KEY(IdServExtraBar , CodProduto) ,
	FOREIGN KEY(IdServExtraBar) REFERENCES SERVICO_FRIGOBAR(idServExtra),
	FOREIGN KEY(CodProduto) REFERENCES PRODUTO(Codigo)	
);
CREATE TABLE TELEFONE_CADASTRO(

	CpfCadastrado CHARACTER(11) ,
	Telefone VARCHAR(15) ,
	
	PRIMARY KEY(CpfCadastrado , Telefone) ,
	FOREIGN KEY(CpfCadastrado) REFERENCES CADASTRO(CPF)	
);







